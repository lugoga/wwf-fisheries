"0",""
"0","catch.clean.group.outlierfree = list()"
"0","sites = catch.clean.group %>% distinct(Location) %>% pull()"
"0",""
"0","for (i in 1:length(sites)){"
"0","  "
"0","  dummy = catch.clean.group %>% filter(Location == sites[i])"
"0","    q = quantile(dummy$catch, na.rm = TRUE)"
"0","    iqr = IQR(dummy$catch, na.rm = TRUE) # alternative: iqr = q[4]-q[2]"
"0","    "
"0","    lower = q[2] - (1.5 * iqr)"
"0","    upper = q[4] + (1.5 * iqr)"
"0","    "
"0"," catch.clean.group.outlierfree[[i]] = dummy %>% "
"0","   filter(catch > lower & catch <= upper)"
"0","  "
"0","}"
"0",""
"0","catch.clean.group.outlierfree = catch.clean.group.outlierfree %>% bind_rows()"
"0",""
"0","formula1 <- y ~ x"
"0",""
"0","ggplot(data = catch.clean.group.outlierfree , "
"0","       aes(x = date, y = catch, col = Location, fill = Location))+"
"0","  geom_point()+"
"0","  geom_smooth(se = TRUE, alpha = .2, method = ""lm"", formula = formula1)+"
"0","  # stat_fit_tb(method = ""lm"","
"0","  #             method.args = list(formula = formula1),"
"0","  #             tb.vars = c(Parameter = ""term"", "
"0","  #                         Estimate = ""estimate"", "
"0","  #                         ""s.e."" = ""std.error"", "
"0","  #                         ""italic(t)"" = ""statistic"", "
"0","  #                         ""italic(P)"" = ""p.value""),"
"0","  #             label.y = ""top"", label.x = ""right"","
"0","  #             parse = TRUE)+"
"0","  stat_poly_eq(aes(label = paste0(""atop("", ..eq.label.., "","", ..rr.label.., "")"")), "
"0","               formula = formula1, rr.digits = 2,"
"0","               parse = TRUE) +"
"0","  # ggrepel::geom_text_repel(data = now, aes(x = date, y = catch, label = label)) +"
"0","  scale_x_date(date_minor_breaks = ""2 year"") +"
"0","  # scale_y_continuous(breaks = seq(100,600,100))+"
"0","  cowplot::theme_minimal_grid()+"
"0","  theme(panel.grid = element_line(linetype = ""dotted""), legend.position = ""none"")+"
"0","  facet_wrap(~Location, scales = ""free_y"")+"
"0","  labs(x = """", y = ""Fish catch (Tonnes)"")"
